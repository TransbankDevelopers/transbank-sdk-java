language: java
jdk: oraclejdk8
sudo: required
addons:
  sonarcloud:
    organization: "transbankdevelopers"
    token:

      secure:"GiTZ9sxXIYigzN0NHyaKK2Afhalsm/uN+Op2Cbyd/nbYDIWzuM++5TrtzJqldf7bO7Z1Uj6hbvyjA4BenLrVvfdspaHj50N1/9nDlyhABJgtROMteTdu6JX7d1kv/u3Epeo8Qk9TzMwzjaUl+JI36ogoypjumqMAO5RqSmAn77375aQ+SFuOyHGRjPTvFzibC8uFi5A92D9KB5kypz/+f9KjBA9Ctzk8J8ClTuey1SQyqrr89VmLbQvYARmZu7xvfGvP3Mk4fQwGXnPetAFhud20ntw+PbWZp5k/n0983R9FxLmEF6Xrz6jptRLaGzUwxYLVsOYiu/cD6WgMwcfTKKjs8XaZq07vWh6w/IqgHH7O0mlIKMvmJEodh3o2vEoB/BAia/FGJk9EbIK6xHZEjfRPlwK4hLZV9cunvtxniBxBuKLOeeP6nkpy1Fh6E+2kPZHOFk9aZ6cAtkogjQ6ZggM4PAx6UfENURHeP9/ChGwvxyCDWyhdOKZoQLb6rTIadYjrgFH7utVc5GAEf0myiYjO2m+HChcWeJlf3DzNOMHZ7MItjWQiiwjBAT/W24GEbWu94uJc43AHPA7ooZYPCOS6s/a0lrKx7mTCdGVf64/gMqNsP4iMMTIaXgSowMpS2G5qYxyQfrv22LUwsPD+M2of/1tlwWmNX4UM1L02Wpg="
install: mvn --settings .travis/settings.xml clean compile
before_install:
  - if [ ! -z "$GPG_SECRET_KEYS" ]; then echo $GPG_SECRET_KEYS | base64 --decode | $GPG_EXECUTABLE --import; fi
  - if [ ! -z "$GPG_OWNERTRUST" ]; then echo $GPG_OWNERTRUST | base64 --decode | $GPG_EXECUTABLE --import-ownertrust; fi
script:
  - mvn --settings .travis/settings.xml clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar -Dsonar.host.url=https://sonarcloud.io -Dsonar.login=$SONAR_LOGIN
deploy:
  -
    provider: script
    script: bash .travis/deploy.sh
    skip_cleanup: true
    on:
      all_branches: true
      jdk: oraclejdk8
